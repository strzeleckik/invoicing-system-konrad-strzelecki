/*
 * This Java source file was generated by the Gradle 'init' task.
 */

package pl.futurecollars.invoicing;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;
import pl.futurecollars.invoicing.model.Company;
import pl.futurecollars.invoicing.model.Invoice;
import pl.futurecollars.invoicing.model.InvoiceEntry;
import pl.futurecollars.invoicing.model.Vat;
import pl.futurecollars.invoicing.service.JsonService;
import pl.futurecollars.invoicing.utils.TextUtils;

public class App {
  public String getGreeting() {
    return "Hello World!";
  }

  public static void main(String[] args) {

    System.out.println(new App().getGreeting());

    Company buyer = new Company("5213861303", "ul. Bukowi≈Ñska 24d/7 02-703 Warszawa, Polska", "iCode Trust Sp. z o.o");
    Company seller = new Company("552-168-66-00", "32-005 Niepolomice, Nagietkowa 19", "Piotr Kolacz Development");

    List<InvoiceEntry> products = List.of(new InvoiceEntry("Programming course", BigDecimal.valueOf(10000), BigDecimal.valueOf(2300), Vat.VAT_23));

    Invoice invoice = new Invoice(1l, LocalDateTime.now(), buyer, seller, products);

    List<Invoice> invoices = List.of(invoice);

    String json = JsonService.getJsonFromObject(invoices);
    System.out.println(json);

    JsonService.saveJsonFile(json, "test.json");

   Object invoices2 = JsonService.getObjectFromJson("test.json", Object.class);

    List<Invoice> invoices3 = (List<Invoice>) invoices2;

    System.out.println(invoices3);

  }

}
